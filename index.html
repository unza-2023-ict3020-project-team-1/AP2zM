<!DOCTYPE html>
<html>
	<head>
		<!-- application title-->
		<title>AP2zM</title>
		<link href="style.css" rel="stylesheet" type="text/css">
		<!-- script to create multiple linear file entries in form-->
		<script>
		
			let counter = 0;
			let metaArr = [];
			let pdfArr = [];
			function addFiles (){
				var pdfI = document.getElementById("pdfI");
				var metaI = document.getElementById("metaI");
				var p1 = pdfI.files[0];
				var m1 = metaI.files[0];
				
				if ( pdfI.files.length > 0  && metaI.files.length > 0){
					pdfArr.push(p1.name);
					metaArr.push(m1.name);
					/*if (counter >= 1 && (metaArr[counter] == metaArr[counter - 1] || pdfArr[counter] == pdfaArr[counter - 1])){
						alert("make sure you are not repeating file inputs");
						return;
					}*/
					
					document.getElementById("apiForm").style.display = "none";
					var list = document.getElementById("list");
					//const pdfI = document.getElementById("pdfI");
					//const metaI = document.getElementById("metaI");
					const br = document.createElement("br");	
					
					const pdfIn = pdfI.files;
					var p = pdfIn[0];
					const metaIn = metaI.files;
					var m = metaIn[0];
					const tableCont = document.getElementById("files-list");
					var table = document.createElement("table");
					var newRow = table.insertRow(-1);
					var cell1 = newRow.insertCell(0);
					var cell2 = newRow.insertCell(1);
					cell1.className = "file-cell";
					cell2.className = "file-cell";
					cell1.style.width = "40%";
					cell2.style.width = "50%";
					cell2.style.paddingLeft = "10%";
					cell1.innerHTML = p.name;
					cell2.innerHTML = m.name;
					table.style.width = "85%";
					document.getElementById("choser").style.textAlign = "center";
					document.getElementById("choser").textContent = "Selecting Files";
					table.style.tableLayout = "fixed";
					tableCont.appendChild(table);
					tableCont.appendChild(document.createElement("hr"));
				} else {
					alert("please select files for both inputs to continue")
				}			
			}
		</script>

	</head>
	<body>
		<p id="ap2zm">AP2zM</p>
		<div id="apiForm">
		<h2>Use API</h2>
		<!-- This form allows users to enter API-->
		<form  onsubmit="fetchPDF(); return false;" method="post" action="api_process.php" class="container">
			<!-- This input field allows users to enter the API URL, and it is required. -->
			<input type="text" id="apiURL" placeholder="Enter API URL" required>
			<!-- This image input acts as a a button with specific dimensions and a border -->
			<input type="submit" value="fetch">
			<br><br><br><br>
		</form>
		</div>
		<!-- upload header 1 tag title -->
		<h2 id="choser"> Upload files</h2>
		<div style="text-align: center" class="container">
		<div id="files-list">
		</div>
		<!-- This form allows users to upload files and will be submitted to "upload.php" -->
		<form action="upload.php" method="post" enctype="multipart/form-data" style="text-align: center;">
			<label for="pdfI" id="pdfL"><img src="pdf.jpg" width="8%" alt="upload pdf" style="display: inline;"></label>
			<input type="file" name="pfdFile" id="pdfI" style="display: none;" multiple>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

			<label for="metaI" id="metaL"><img src="meta.jpg" width="8%" alt="upload metadata" style="display: inline;"></label>
			
			<input type="file" name="metaFile[]" id="metaI" style="display: none;" multiple>
			<br>
			<button type="button" id="addmore" onclick="addFiles()"><!--<img src="add-files.png" alt="add files">-->Add Files</button>
			<br><br>
			<button type="submit">Upload</button>
			<br><br>
		</form>
		</div>
	</body>
</html>
